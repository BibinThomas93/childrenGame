<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>oop_game</title>
    <link href='https://fonts.googleapis.com/css?family=Bangers' rel='stylesheet'>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<script src="pixi.min.js"></script>

<body>

    <script>
        function myGameClass() {

            var self = this;
            self.initGame = function() {
                self.profile;
                self.level = 0;
                self.availableFriends = [];
                self.availableFriendsName = [];
                self.friendsImage = [];
                self.loader = PIXI.loader;
                self.stage = new PIXI.Container();
                self.renderer = PIXI.autoDetectRenderer(window.innerWidth, window.innerHeight);
                self.domVar = document.body;
                self.domVar.appendChild(self.renderer.view);

                self.w = window.innerWidth;
                self.sw = 800;
                self.dw = (self.w - self.sw) / 2;

                self.h = window.innerHeight;
                self.hw = 500;
                self.dh = (self.h - self.hw) / 2;
            }



            self.initGameFriends = function() {

                self.loader
                    .add("images/0.png")
                    .add("images/1.png")
                    .add("images/2.png")
                    .add("images/3.png")
                    .add("images/4.png")
                    .add("images/5.png");

                //  for(var i=1;i<6;i++){
                //    self.availableFriends[i]= new Friend(i);

                //  }
                self.availableFriendsName[0] = "ben10";
                self.availableFriendsName[1] = "dora";
                self.availableFriendsName[2] = "micki mouse";
                self.availableFriendsName[3] = "chotta bheem";
                self.availableFriendsName[4] = "tom";

                self.displayProfileBg = function() {
                    self.heading = new PIXI.Text(
                        "Who is your friend?", {
                            fontFamily: "Bangers",
                            fontSize: 52,
                            fill: "orange"
                        }
                    );

                    self.profileBg = new FriendClass(0);
                    self.profileBg.position.set(self.dw, self.dh);
                    self.profileBg.scale.set(1, 1);

                    self.heading.position.set(self.dw + 50, self.dh + 50);

                    self.stage.addChild(self.profileBg);
                    self.stage.addChild(self.heading);
                    self.renderer.render(self.stage);

                }

            }



            self.displayFriends = function() {
                var x = self.dw + 50;
                for (var i = 1; i < 6; i++) {

                    self.availableFriends[i] = new FriendClass(i);
                    self.availableFriends[i].position.set(x, self.dh + 190);
                    self.availableFriends[i].scale.set(0.2, 0.2);
                    self.stage.addChild(self.availableFriends[i]);

                    self.availableFriends[i].interactive = true
                    self.availableFriends[i].buttonMode = true;
                    self.availableFriends[i].accessible = true;

                    self.availableFriends[i].mouseover = function(mouseData) {

                        //  console.log(zIndex);
                         this.animation();
                         this.circle.position.set(mouseData.data.global.x, self.dh+200);
                          // self.availableFriends[i].scale.set(0.25, 0.25);
                         //  self.availableFriends[i].position.set(x, self.dh + 190);
                         self.stage.addChild(this.circle);
                         self.renderer.render(self.stage);
                    }

                    self.availableFriends[i].mouseout = function(mouseData) {
                         this.circle.alpha = 0;
                         self.stage.addChild(this.circle);
                         self.renderer.render(self.stage);
                    }

                    x = x + 150;
                }
                self.renderer.render(self.stage);
            }



            self.displayFriendsName = function() {

                var x = self.dw + 50;
                for (var i = 0; i < 6; i++) {

                    self.Name = new PIXI.Text(
                        self.availableFriendsName[i].toString(), {
                            fontFamily: "Bangers",
                            fontSize: 26,
                            fill: "orange"
                        }
                    );

                    self.Name.position.set(x, self.dh + 335);
                    self.stage.addChild(self.Name);
                    self.renderer.render(self.stage);
                    x = x + 150;
                }
            }
        }


        function FriendClass(number) {

            PIXI.Sprite.call(this, PIXI.loader.resources["images/" + number + ".png"].texture);

            this.animation = function() {

                 this.circle = new PIXI.Graphics();
                 this.circle.lineStyle(3, 0xFFFFFF, 1);
                 this.circle.beginFill(0xE66D22, 1);
                 this.circle.drawCircle(60, 60, 50);
                 this.circle.endFill();
                 this.circle.alpha = 1;
                  // this.animate();
                  // this.animate = function()
                  //   {
                  //   this.requestAnimationFrame(this.animate);
                  //   // render the root container
                  //   return this;
                  //
                  //   }
                  return this;

            }

            return this;
        }

        FriendClass.prototype = Object.create(PIXI.Sprite.prototype);
        FriendClass.prototype.constructor = FriendClass;

        // var friend = new FriendClass();
        // friend.animation();

        var game = new myGameClass();
        game.initGame();
        //game.prepareGameCanvas();
        game.initGameFriends();
        game.loader.load(game.displayProfileBg);
        game.loader.load(game.displayFriends);
        game.loader.load(game.displayFriendsName);
    </script>
</body>
