<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>oop_game</title>
    <link href='https://fonts.googleapis.com/css?family=Bangers' rel='stylesheet'>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js"></script>
</head>

<body>
    <script>
        var app = new PIXI.Application(window.innerWidth, window.innerHeight);

        document.body.appendChild(app.view);


        function inheritPrototype(childObject, parentObject) {
            var copyOfParent = Object.create(parentObject.prototype);
            copyOfParent.constructor = childObject;
            childObject.prototype = copyOfParent;
        }


        function Friend(texture, name, xPos) {

            friendCntr = new PIXI.Container();
            avatarCntr = new PIXI.Container();
            this.marginLeft = (window.innerWidth - 800) / 2;
            this.marginTop = (window.innerHeight - 500) / 2;
            yPos = this.marginTop + 200;

            PIXI.Sprite.call(this, texture);

            this.name = new PIXI.Text(name, {
                fontFamily: "Bangers",
                fontSize: 26,
                fill: "orange"
            });

            this.interactive = true;
            this.buttonMode = true;
            this.accessible = true;

            this.circle = new PIXI.Graphics();
            this.circle.lineStyle(3, 0xFFFFFF, 1);
            this.circle.beginFill(0xE66D22, 1);
            this.circle.drawCircle(60, 60, 50);
            this.circle.endFill();
            this.circleTexture = this.circle.generateTexture();
            this.circleSprite = new PIXI.Sprite(this.circleTexture);
            this.circleSprit.alpha = 0;

            this.position.set(xPos, yPos);
            this.scale.set(0.2, 0.2);
            this.name.position.set(xPos, yPos + 150);

            // this
            //     .on('pointerover', generateInteraction)
            //     .on('mouseout', deleteInteraction)

            avatarCntr.addChild(this.circleSprit);
            avatarCntr.addChild(this);
            avatarCntr.addChild(this.name);
            friendCntr.addChild(avatarCntr);
            app.stage.addChild(friendCntr);

            this.generateInteraction = function() {
                this.circleSprit.alpha = 1;
                this.circleSprit.position.set(xPos, yPos);
                this.scale.set(.25);
                console.log(this);

            }

            this.deleteInteraction = function() {
                this.circleSprit.alpha = 0;
                this.scale.set(.2);

            }

            this.mouseover = function(mouseData) {
                this.generateInteraction();

            }
            this.mouseout = function(mouseData) {
                this.deleteInteraction();

            }

            // this.click = function(){
            //     app.stage.visible = false;
            //     this.prepareFriendIntroStage();
            //
            //   }

            this.prepareBackground = function(resources){

              this.heading = new PIXI.Text("Who is your friend?", {
                  fontFamily: "Bangers",
                  fontSize: 56,
                  fill: "orange"
              });


              this.background = new PIXI.Sprite(resources["images/0.png"].texture);
              this.background.position.set(this.marginLeft,this.marginTop);
              this.heading.position.set(this.marginLeft+40,this.marginTop+70);
              friendCntr.addChild(this.background);
              friendCntr.addChild(this.heading);
              // app.stage.addChild(friendCntr);

            }

        };

        // Friend.prototype = {
        //   constructor: Friend,
        //   prepareBackground: function(resources){
        //
        //   this.background = new PIXI.Sprite(resources["images/0.png"].texture);
        //   app.stage.addChild(this.background);
        //
        //   }
        // }

        inheritPrototype(Friend, PIXI.Sprite);

        function Game() {
            this.availableFriends = [];
            this.windowWidth = window.innerWidth;
            this.marginLeft = (window.innerWidth - 800) / 2;
            this.marginTop = (window.innerHeight - 500) / 2;

        };


        Game.prototype = {
            constructor: Game,
            initGameFriends: function(resources) {

                var xPos = this.marginLeft + 50;
                var yPos = this.marginTop + 200;
                this.availableFriendsName = ["", "ben10", "dora", "micki mouse", "chotta bheem", "tom"];

                for (var i = 1; i < 6; i++) {
                    this.availableFriends[i] = new Friend(resources["images/" + i + ".png"].texture, this.availableFriendsName[i], xPos);
                    xPos += 150;
                }

            }

        }


        PIXI.loader.add('images/1.png')
            .add('images/2.png')
            .add('images/3.png')
            .add('images/4.png')
            .add('images/5.png')
            .add('images/0.png').load(function(loader, resources) {

                var friendObj = new Friend();
                friendObj.prepareBackground(resources);

                var game = new Game();
                game.initGameFriends(resources);

            });
    </script>
</body>

</html>
