<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>oop_game</title>
    <link href='https://fonts.googleapis.com/css?family=Bangers' rel='stylesheet'>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js"></script>
</head>

<body>
    <script>
        var app = new PIXI.Application(window.innerWidth, window.innerHeight);
        var friendIntro = new PIXI.Application(window.innerWidth, window.innerHeight);

        document.body.appendChild(app.view);
        document.body.appendChild(friendIntro.view);

        function inheritPrototype(childObject, parentObject) {
            var copyOfParent = Object.create(parentObject.prototype);
            copyOfParent.constructor = childObject;
            childObject.prototype = copyOfParent;
        }

        function Friend(texture, name) {
            PIXI.Sprite.call(this, texture);

            this.name = new PIXI.Text(name, {
                fontFamily: "Bangers",
                fontSize: 26,
                fill: "orange"
             });

            this.interactive = true;
            this.buttonMode = true;
            this.accessible = true;

            this.circle = new PIXI.Graphics();
            this.circle.lineStyle(3, 0xFFFFFF, 1);
            this.circle.beginFill(0xE66D22, 1);
            this.circle.drawCircle(60, 60, 50);
            this.circle.endFill();

            this.mouseover = function(mouseData){
              this.generateInteraction();

               }
            this.mouseout = function(mouseData){
              this.deleteInteraction();

              }

            // this.click = function(){
            //     app.stage.visible = false;
            //     friendIntro.stage.visible = true;
            //
            //   }

        }

        inheritPrototype(Friend, PIXI.Sprite);

        function Game() {
            this.availableFriends = [];
            this.windowWidth = window.innerWidth;
            this.marginLeft = (window.innerWidth - 800) / 2;
            this.marginTop = (window.innerHeight - 500) / 2;

        };

        Game.prototype = {
            constructor: Game,
            initGameFriends: function(resources) {
                var xPos = this.marginLeft + 50;
                var yPos = this.marginTop + 200;
                    this.availableFriendsName = ["", "ben10", "dora", "micki mouse", "chotta bheem", "tom"];

                for (var i = 1; i < 6; i++) {
                    this.availableFriends[i] = new Friend(resources["images/" + i + ".png"].texture, this.availableFriendsName[i]);
                    this.availableFriends[i].position.set(xPos, yPos);
                    this.availableFriends[i].scale.set(0.2, 0.2);
                    this.availableFriends[i].name.position.set(xPos, yPos + 150);
                    xPos += 150;

                    this.availableFriends[i].generateInteraction = function()
                    {

                        this.circle.alpha = 1;
                        this.circle.position.set(xPos,yPos);
                        app.stage.addChild(this.circle);
                    }

                    this.availableFriends[i].deleteInteraction = function()
                    {
                        this.circle.alpha = 0;
                        app.stage.addChild(this.circle);
                    }
                }

            },

            prepareBackground: function(background) {

                var hXpos = this.marginLeft + 50;
                var hYpos = this.marginTop + 50;
                this.background = new PIXI.Sprite(background.texture);
                this.background.position.set(this.marginLeft, this.marginTop);
                this.heading = new PIXI.Text("Who is your friend?", {
                    fontFamily: "Bangers",
                    fontSize: 52,
                    fill: "orange"
                });
                this.heading.position.set(hXpos, hYpos);
            },

            displayFriends: function() {
                for (var i = 1; i < 6; i++) {
                    app.stage.addChild(this.availableFriends[i]);

                    app.stage.addChild(this.availableFriends[i].name);

                }

            },


            prepareStage: function() {
                app.stage.addChild(this.background);
                app.stage.addChild(this.heading);
                this.displayFriends();
                friendIntro.stage.addChild(this.background1);
            }
        }


        PIXI.loader.add('images/1.png')
            .add('images/2.png')
            .add('images/3.png')
            .add('images/4.png')
            .add('images/5.png')
            .add('images/0.png').load(function(loader, resources) {

                var game = new Game();
                game.initGameFriends(resources);
                game.prepareBackground(resources["images/0.png"]);
                game.prepareStage();
       });
    </script>
</body>

</html>
